#!/bin/sh

hflg=0

#if test $# -eq 0 ;then
#	hflg=1
#fi

while getopts h opt ;do
	case $opt in
		h)hflg=1;;
	esac
done
shift $(($OPTIND - 1))

if test $hflg -eq 1 ;then
	echo "Usage: bkup"
	exit 0
fi


if test "$(diff -a -r -u $HOME/miyagawtools/ /mnt/windows/bk/miyagawtools/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/miyagawtools/ -> /mnt/windows/bk/miyagawtools/'
	rsync -auv $HOME/miyagawtools/* /mnt/windows/bk/miyagawtools/
fi

if test "$(diff -a -r -u $HOME/ctf/ /mnt/windows/bk/ctf/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/ctf/ -> /mnt/windows/bk/ctf/'
	rsync -auv $HOME/ctf/* /mnt/windows/bk/ctf/
fi

if test "$(diff -a -r -u $HOME/Desktop/ /mnt/windows/bk/Desktop/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/Desktop/ -> /mnt/windows/bk/Desktop/'
	rsync -auv $HOME/Desktop/* /mnt/windows/bk/Desktop/
fi

if test "$(diff -a -r -u $HOME/Documents/ /mnt/windows/bk/Documents/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/Documents/ -> /mnt/windows/bk/Documents/'
	rsync -auv $HOME/Documents/* /mnt/windows/bk/Documents/
fi

if test "$(diff -a -r -u $HOME/Downloads/ /mnt/windows/bk/Downloads/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/Downloads/ -> /mnt/windows/bk/Downloads/'
	rsync -auv $HOME/Downloads/* /mnt/windows/bk/Downloads/
fi

if test "$(diff -a -r -u $HOME/neosnippets/ /mnt/windows/bk/neosnippets/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/neosnippets/ -> /mnt/windows/bk/neosnippets/'
	rsync -auv $HOME/neosnippets/* /mnt/windows/bk/neosnippets/
fi

if test "$(diff -a -r -u $HOME/tmp/ /mnt/windows/bk/tmp/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/tmp/ -> /mnt/windows/bk/tmp/'
	rsync -auv $HOME/tmp/* /mnt/windows/bk/tmp/
fi

if test "$(diff -a -r -u $HOME/peda/ /mnt/windows/bk/peda/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/peda/ -> /mnt/windows/bk/peda/'
	rsync -auv $HOME/peda/* /mnt/windows/bk/peda/
fi

if test "$(diff -a -r -u $HOME/.bashrc $HOME/rc/bashrc | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/.bashrc -> '$HOME'/rc/bashrc'
	rsync -auv $HOME/.bashrc $HOME/rc/bashrc
fi


if test "$(diff -a -r -u /usr/share/vim/vimrc /mnt/windows/bk/rc/vimrc | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf '/usr/share/vim/vimrc -> /mnt/windows/bk/rc/vimrc'
	rsync -auv /usr/share/vim/vimrc $HOME/rc/
fi

if test "$(diff -a -r -u $HOME/rc/ /mnt/windows/bk/rc/ | grep @@)" ;then
	cecho -rfn '[+]'
	cecho -gf $HOME'/rc/ -> /mnt/windows/bk/rc/'
	rsync -auv $HOME/rc/* /mnt/windows/bk/rc/
fi


